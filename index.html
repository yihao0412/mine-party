<!DOCTYPE html><html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>è¸©åœ°é›·æ´¾å°éŠæˆ²ï½œæœ€çµ‚æ•´åˆç‰ˆ</title>
<style>
/* =========================
   å…¨åŸŸèˆ‡è‡ªå‹•ç¸®æ”¾è¨­å®š
   ========================= */
:root {
  --cell-size: min(6.5vmin, 80px); /* æ”¯æ´åˆ° 15Ã—15 */
  --cell-gap: 0.45vmin;
}body { margin: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; text-align: center; }

h1, h2 { margin: 8px 0; }

button { padding: 8px 16px; font-size: 16px; margin: 6px; cursor: pointer; }

input { padding: 6px; font-size: 16px; width: 80px; text-align: center; }

/* ========================= è¨­å®šç•«é¢ ========================= */ #setup { padding: 16px; }

.rule { margin-top: 10px; text-align: left; display: inline-block; }

/* ========================= éŠæˆ²ç•«é¢ ========================= */ #game { display: none; padding: 10px; }

#status { font-size: 20px; margin-bottom: 10px; }

.grid { display: grid; gap: var(--cell-gap); justify-content: center; margin: auto; }

.grid > div { width: var(--cell-size); height: var(--cell-size); font-size: calc(var(--cell-size) * 0.55); font-weight: bold;

display: flex; justify-content: center; align-items: center;

border-radius: 10px; background: #7dd97d; /* å®‰å…¨ç¶  */ cursor: pointer; user-select: none; }

/* é¡è‰²ç‹€æ…‹ */ .mine { background: #e74c3c !important; color: #fff; } .hint { background: #3498db !important; color: #fff; } .penalty { background: #f39c12 !important; color: #fff; } .disabled { cursor: default; }

/* é˜²æ­¢ç‰ˆé¢è¢«åˆ‡ */ #board-container { max-width: 96vw; max-height: 96vh; overflow: auto; }

@media (min-width: 1200px) { :root { --cell-size: min(7.5vmin, 100px); } body { font-size: 22px; } } </style>

</head>
<body><h1>ğŸ² è¸©åœ°é›·æ´¾å°éŠæˆ²</h1><div id="setup">
  <h2>éŠæˆ²è¨­å®š</h2>
  <div>
    æ£‹ç›¤å¤§å°ï¼š<input id="size" type="number" value="7" min="5" max="15" /> Ã— 
    <input id="size2" type="number" value="7" min="5" max="15" />
  </div>
  <div>
    åœ°é›·æ•¸é‡ï¼š<input id="mineCount" type="number" value="1" min="1" />
    è™•ç½°æ ¼æ•¸é‡ï¼š<input id="penaltyCount" type="number" value="1" min="0" />
  </div>  <div style="margin-top:10px;">
    åƒåŠ è€…ï¼ˆæœ€å¤š 30 ä½ï¼Œé€—è™Ÿåˆ†éš”ï¼‰<br />
    <input id="players" type="text" style="width:300px" placeholder="å°æ˜,å°ç¾,é˜¿å®" />
  </div><button onclick="startGame()">é–‹å§‹éŠæˆ²</button>

  <div class="rule">
    <p>ğŸ”´ è¸©åˆ°é›·ï¼šç›´æ¥ç²å‹</p>
    <p>ğŸ”µ é›·çš„ä¸Šä¸‹å·¦å³</p>
    <p>ğŸŸ¢ å®‰å…¨</p>
    <p style="color:#f39c12">ğŸŸ§ è™•ç½°æ ¼</p>
  </div>
</div><div id="game">
  <div id="status"></div>
  <div id="board-container">
    <div id="grid" class="grid"></div>
  </div>
  <br />
  <button onclick="resetGame()">é‡æ–°å›åˆ°è¨­å®š</button>
</div><script>
let mines = new Set();
let penalties = new Set();
let players = [];
let currentPlayer = 0;
let size;

function startGame() {
  size = parseInt(sizeInput().value);
  const mineCount = parseInt(document.getElementById('mineCount').value);
  const penaltyCount = parseInt(document.getElementById('penaltyCount').value);

  players = document.getElementById('players').value.split(',').map(p => p.trim()).filter(p => p).slice(0,30);
  if (players.length === 0) players = ['ç©å®¶1'];

  currentPlayer = 0;
  mines.clear();
  penalties.clear();

  const total = size * size;

  while (mines.size < mineCount) {
    mines.add(Math.floor(Math.random() * total));
  }
  while (penalties.size < penaltyCount) {
    const r = Math.floor(Math.random() * total);
    if (!mines.has(r)) penalties.add(r);
  }

  buildGrid(size);
  document.getElementById('setup').style.display = 'none';
  document.getElementById('game').style.display = 'block';
  updateStatus();
}

function buildGrid(n) {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  grid.style.gridTemplateColumns = `repeat(${n}, 1fr)`;

  for (let i = 0; i < n*n; i++) {
    const d = document.createElement('div');
    d.textContent = i + 1;
    d.onclick = () => pick(i, d);
    grid.appendChild(d);
  }
}

function pick(index, cell) {
  if (cell.classList.contains('disabled')) return;
  cell.classList.add('disabled');

  if (mines.has(index)) {
    cell.classList.add('mine');
    alert(`ğŸ‰ æ­å–œ ${players[currentPlayer]} è¸©åˆ°åœ°é›·ï¼`);
  } else if (penalties.has(index)) {
    cell.classList.add('penalty');
    alert(`âš ï¸ ${players[currentPlayer]} æŠ½åˆ°è™•ç½°æ ¼ï¼`);
  } else {
    const neighbors = getNeighbors(index);
    if ([...neighbors].some(n => mines.has(n))) {
      cell.classList.add('hint');
    }
  }

  currentPlayer = (currentPlayer + 1) % players.length;
  updateStatus();
}

function getNeighbors(i) {
  const r = Math.floor(i / size);
  const c = i % size;
  const res = [];
  if (r > 0) res.push(i - size);
  if (r < size-1) res.push(i + size);
  if (c > 0) res.push(i - 1);
  if (c < size-1) res.push(i + 1);
  return res;
}

function updateStatus() {
  document.getElementById('status').textContent = `è¼ªåˆ°ï¼š${players[currentPlayer]}`;
}

function resetGame() {
  document.getElementById('game').style.display = 'none';
  document.getElementById('setup').style.display = 'block';
}

function sizeInput() {
  return document.getElementById('size');
}
</script></body>
</html>